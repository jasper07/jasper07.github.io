
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>Reuse and translatable texts - </title>
	<meta name="author" content="John Patterson">

	
	<meta name="description" content="Merging translatable text bundles">
	<meta name="keywords" content="sapui5, i18n, reuse, components">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="" type="application/atom+xml">
	
	<link rel="canonical" href="http://jasper07.secondphase.com.au/blog/2016/04/09/reuse-and-translatable-texts/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

	<link href="/stylesheets/prism.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/stylesheets/style.css" media="screen, projection" rel="stylesheet" type="text/css">
	
  

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<img src="http://www.gravatar.com/avatar/086ff45bf9e25af5f6d6bb318cc4d07a?s=160" alt="Profile Picture" style="width: 160px;" />
	
</div>
<h1>
	John Patterson
</h1>

<p class="subtitle">the view from the trenches</p>

<nav id="main-nav"><ul class="main">
    <li><a href="/">Blog</a></li>
    <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		
		
			<a class="google" href="https://plus.google.com/110699789094705017407" rel="author" title="Google+">Google+</a>
		
		
			<a class="twitter" href="http://twitter.com/jasper_07" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/jasper07" title="GitHub">GitHub</a>
		
		
		
		
			<a class="linkedin" href="http://www.linkedin.com/in/johnspatterson" title="LinkedIn">LinkedIn</a>
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Reuse and Translatable Texts</h1>
	<div class="entry-content" itemprop="articleBody"><p>Often when working on a suite of applications you will want to encapsulate common code into reusable libraries and or components. A requirement that has popped up a few times is how do you merge a reusable master text file with the translatable text file the applicaiton uses.</p>

<p>Below i show how its possible to merge an application i18n models texts with the texts from a reusable components i18n model.</p>

<p>Why would you want to do it? think the scenario where you are creating a suite of Sales and Distribution application, there is a common buiness vocabulary that you may want to share between applications.</p>

<p>The pic below shows a reusable component, later it will be loaded as a dependency in an application, in this simple example i am creating one text property which will be merged, ensure that the i18n model is created when the Component is instantiated.</p>

<p><img src="/images/blog/reusable_component.PNG" /></p>

<p>Next for example we create an application with a single text also</p>

<p><img src="/images/blog/application_component.PNG" /></p>

<p>And declare a simple view to show texts from the two sources</p>

<p>To consume the common component, inside the manifest under &ldquo;dependencies&rdquo; declare your component, declaring the &ldquo;resourceRoots&rdquo; will tell the application where to locate the module. In the example below the Component is saved as a BSP in the ABAP UI5 Repository.</p>

<pre class="language-html"><code>&lt;mvc:View controllerName=&quot;test.reuse.myApp.controller.Main&quot; 
xmlns=&quot;sap.m&quot; xmlns:mvc=&quot;sap.ui.core.mvc&quot;&gt;
    &lt;Button text=&quot;{i18n&gt;myAppText}&quot;/&gt;
    &lt;Button text=&quot;{i18n&gt;commonText}&quot;/&gt;
&lt;/mvc:View&gt;
</code></pre>




<pre class="language-javascript"><code>"sap.ui5": {
    "rootView": "test.reuse.myApp.view.Main",
    "resourceRoots": {
        "test.reuse.common": "/sap/bc/ui5_ui5/sap/zcommon"
    },
    "dependencies": {
        "minUI5Version": "1.32.1",
        "components": {
            "test.reuse.common": {
                "minVersion": "1.0.0"
            }
        }
    },
    "models": {
        "i18n": {
            "type": "sap.ui.model.resource.ResourceModel",
            "uri": "i18n/i18n.properties"
        }
    },
</code></pre>


<p>If you are like me and developing teams that where members use both thier own and the WebIde you will want to overide the resource root and point to both local server resources and the cloud based workspace where you have the component, this is similar to how you would reference the source application from an extension project. If you set the &ldquo;final&rdquo; flag to true then any subsequent path registration will be ignored.</p>

<pre class="language-javascript"><code>var sUrl;
if (window.location.host.match(/^(localhost|127.0.0.1|0.0.0.0)/)) {
    sUrl = "../common";
} else if (window.location.host.match(/^(pXXX)/)) {
    sUrl = "/../orion/file/pXXXXtrial$PXXXXX-OrionContent/common/";
}

jQuery.sap.registerModulePath("test.reuse.common", {
    url: sUrl,
    final: true
});
</code></pre>


<p>Don&rsquo;t forget to add the &ldquo;neo-app.json&rdquo; entries for the backend and orion paths</p>

<pre class="language-javascript"><code>{
    "path": "/orion/",
    "target": {
        "type": "service",
        "name": "orion",
        "preferLocal": true
    },
    "description": "Orion Server"
}, {
    "path": "/sap/bc/ui5_ui5/sap/",
    "target": {
        "type": "destination",
        "name": "abap",
        "entryPath": "/sap/bc/ui5_ui5/sap/"
    },
    "description": "Gateway Server"
}
</code></pre>


<p>So we have create a reuse component, add it as a dependency to our application, added options for finding the Component when run locally and from a server, all that is left is to get an instance of the reuse component and merge the i18n models, we do that in the applications component.</p>

<pre class="language-javascript"><code>sap.ui.define(['sap/ui/core/UIComponent'],
    function(UIComponent) {
        "use strict";

        return UIComponent.extend("test.reuse.myApp.Component", {
            metadata: {
                "manifest": "json"
            },

            init: function() {
                // get the i18n model for the app
                var oI18nModel = this.getModel("i18n");

                // get the common component
                var oCommonComponent = sap.ui.component({
                    name: "test.reuse.common"
                });

                // get the common component resource bundle
                if (oCommonComponent) {
                    var oBundle = oCommonComponent.getModel("i18n").getResourceBundle();

                    // enhance the app i18n with the resources from the commmon component
                    oI18nModel.enhance(oBundle);
                }
                // call the init function of the parent
                UIComponent.prototype.init.apply(this, arguments);
            }
        });
    });
</code></pre>


<p>Then when we run the application, the two texts are merged into one model</p>

<p><img src="/images/blog/application_merged_text.PNG" /></p>
</div>

</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_button_google_plusone" g:plusone:size="medium"></a>
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid="></script>
</div>



<section id="comment">
    <h1 class="title">Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>
</div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2016

    John Patterson

 Powered by <a href="http://shashankmehta.in/archive/2012/greyshade.html">Greyshade</a> for Octopress
<script type="text/javascript" src="/javascripts/libs/prism.js"></script>
<script type="text/javascript" src="/javascripts/libs/prism-line-numbers.js"></script>
</footer>
		</div>
	</div>
	

<script type="text/javascript">
      var disqus_shortname = 'jasper07';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://jasper07.secondphase.com.au/blog/2016/04/09/reuse-and-translatable-texts/';
        var disqus_url = 'http://jasper07.secondphase.com.au/blog/2016/04/09/reuse-and-translatable-texts/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>





  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>




</body>
</html>
